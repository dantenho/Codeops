<!-- [REFACTOR] GitHub interaction booster doc
Agent: GPT-5.1 Codex
Timestamp: 2025-12-03T10:45:00Z -->

# EudoraX Prototype -- GitHub Interaction & Merge Playbook

This document distills the habits that keep GitHub interactions high-signal, maximize bot accuracy, and raise merge success rates. Pair it with [`CONTRIBUTING.md`](CONTRIBUTING.md) for the broader vibe-coding playbook and with [`docs/WORKFLOWS.md`](docs/WORKFLOWS.md) for CI internals.

## Table of Contents

1. [Collaboration Signals](#collaboration-signals)
2. [Environment & Tooling](#environment--tooling)
3. [Branch & Commit Rhythm](#branch--commit-rhythm)
4. [Pull Request Flow](#pull-request-flow)
5. [Automation Alignment](#automation-alignment)
6. [Testing Grid](#testing-grid)
7. [Troubleshooting](#troubleshooting)
8. [Support Channels](#support-channels)

---

## Collaboration Signals

Bots and reviewers key off clear metadata. Always stamp contributions with the same signals so agent-detection, telemetry validation, and merge automation stay accurate.

| Requirement | Why it matters | How to apply |
| --- | --- | --- |
| **Operation Tag** (`[CREATE]`, `[REFACTOR]`, `[DEBUG]`, `[MODIFY]`) | Enables workflow routing and doc scanners. | Place at top of every touched file (HTML comment for Markdown). |
| **Agent Signature** (`Agent: Name`, ISO timestamp) | Lets GitHub bots correlate commits, docs, and telemetry. | Co-locate with the tag. |
| **Telemetry Logs** (`CodeAgents/{Agent}/logs/`) | Required for compliance report and merge gates. | Emit one JSON log per meaningful change using the schemas in `CodeAgents/schemas/`. |
| **Issue/PR References** | Feeds optimization detectors and merge orchestrator context. | Mention `Fixes #123` or link PR numbers in commit bodies and telemetry context. |

Operation log template:

```json
{
  "agent": "GPT-5.1 Codex",
  "timestamp": "2025-12-03T10:45:00Z",
  "operation": "REFACTOR",
  "target": {
    "file": "teste",
    "function": null,
    "lines": {"start": 1, "end": 200}
  },
  "status": "SUCCESS",
  "metadata": {"tests": []}
}
```

---

## Environment & Tooling

1. **Clone + Branch**
   ```bash
   git clone https://github.com/Eudora-IA/Prototype.git
   cd Prototype
   git checkout -b agent/YourHandle/feature-sync
   ```
2. **UV-Managed Environment**
   ```bash
   uv venv
   .venv\Scripts\activate  # or source .venv/bin/activate
   uv pip install -r backend/requirements.txt
   uv pip install -r tools/Pylorix/requirements.txt
   uv pip install ruff black isort mypy pydocstyle interrogate pre-commit
   pre-commit install
   ```
3. **Local Bots Check (single command)**
   ```bash
   pre-commit run --all-files
   pytest
   ```

Caching the `.venv` folder between runs drastically reduces CI warm-up time and keeps telemetry cost tracking consistent.

---

## Branch & Commit Rhythm

**Branching**
- `agent/{AgentName}/{feature}` for automated agents.
- `contributor/{gh-handle}/{feature}` for humans.
- Sync weekly: `git fetch origin && git rebase origin/main` to minimize merge conflicts.

**Commit Pattern**
```
[AgentName] type: imperative summary

Motivation / link to issue or PR.
```
Types: `feat`, `fix`, `docs`, `refactor`, `test`, `chore`.

Include telemetry context IDs in commit bodies when possible; merge workflows use them to match logs with commits.

---

## Pull Request Flow

1. **Prep Checklist**
   - ✅ Branch is up-to-date with `main` or `develop`.
   - ✅ Operation tags + agent signatures present.
   - ✅ Telemetry JSONs committed.
   - ✅ `pre-commit run --all-files` clean.
   - ✅ `pytest` (and `pytest -m integration` when flags set) pass locally.
   - ✅ Doc updates or links added where relevant.

2. **PR Template Essentials**
   - Description focuses on *impact* and *verification*.
   - Indicate gate type (CREATE/DEBUG/etc.) to help reviewers triage.
   - Attach manual testing notes or environment flags the bots cannot cover.

3. **Reviewer/Bot Friendly Signals**
   - Highlight risky files (migrations, workflows) in the PR body.
   - Mention related optimization patterns or evaluation gates triggered.
   - Label PRs with `auto-merge` only after CI is green and telemetry attached.

---

## Automation Alignment

| Bot/Gate | Expectation | Command / Trigger |
| --- | --- | --- |
| **Agent Detection** | Branch + commit naming match the patterns above. | n/a (automatic). |
| **Documentation Validation** | Interrogate coverage >= 90%, Google docstrings, operation tags. | `interrogate -v -i --fail-under=90 tools/Pylorix/` |
| **Code Quality** | `ruff`, `black`, `isort`, `mypy` clean. | `ruff check . --fix`, `black .`, `isort .`, `mypy tools/Pylorix/` |
| **Telemetry Validation** | JSON files adhere to schemas. | `python -m json.tool CodeAgents/ID/<Agent>/logs/*.json` |
| **Quality Gates** | For code changes, run Evaluation suite when relevant. | `python -m CodeAgents.Evaluation.examples.usage_example` |
| **Merge Orchestrator** | Requires all statuses green + telemetry reference. | Label PR with `auto-merge` when ready. |

When modifying workflows under `.github/workflows/`, cross-reference [`docs/WORKFLOWS.md`](docs/WORKFLOWS.md) to keep instructions and automation in sync.

---

## Testing Grid

| Layer | Scope | Command | Notes |
| --- | --- | --- | --- |
| Unit | `tests/` | `pytest` | Default fast feedback. |
| Targeted | Specific module | `pytest path/test_file.py -k case` | Use during focused debugging. |
| Coverage | Tools / services | `pytest --cov=tools/Pylorix --cov-report=html` | Attach report link in PR when touching critical paths. |
| Integration | External deps | `pytest -m integration` | Guard with env variables (Supabase, etc.). |
| Manual | UI / hardware | Document steps + screenshots in PR. | Required when automation cannot cover scenario. |

---

## Troubleshooting

| Signal | Fix |
| --- | --- |
| Docstring coverage below gate | Run `interrogate -v -i`, add docstrings, rerun. |
| Missing operation tag/signature | Add HTML/Python comment block at top of changed file. |
| Telemetry schema fail | Validate JSON via schema, ensure `status` is one of `SUCCESS`, `FAILURE`, `PENDING`. |
| Ruff/Black/isort drift | Re-run formatters locally before pushing. |
| MyPy warnings escalated | Tighten type hints or justify with `# type: ignore[rule]`. |
| Merge conflicts | `git fetch origin && git rebase origin/main`, resolve, rerun bots. |
| Workflow cache miss | Bump cache key or trigger manual cache priming run. |

---

## Support Channels

- **Docs**: Browse `docs/` plus [`PROJECT_STATUS.md`](PROJECT_STATUS.md) for roadmap context.
- **Issues/Discussions**: Propose work in GitHub Issues; ask questions in Discussions.
- **Agent Protocol**: Full specification in `Agents.MD`.
- **Telemetry Help**: Reference `CodeAgents/schemas/*.json` or ping the ops channel noted in `PROJECT_STATUS.md`.

Deliver focused PR descriptions, keep the bots fed with clean metadata, and merges will stay smooth.
